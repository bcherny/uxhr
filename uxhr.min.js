!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define("uxhr",b):a.uxhr=b()}(this,function(){"use strict";return function(a,b,c){b=b||"",c=c||{};var d=c.complete||function(){},e=c.success||function(){},f=c.error||function(){},g=c.timeout||0,h=c.ontimeout||function(){},i=c.onprogress||function(){},j=c.headers||{},k=c.method||"GET",l=c.sync||!1,m=function(){return 0===a.indexOf("http")&&"undefined"!=typeof XDomainRequest?new XDomainRequest:new XMLHttpRequest}();if(!m)throw new Error("Browser doesn't support XHR");var n="undefined"!=typeof window.FormData;if("string"!=typeof b&&n&&!(b instanceof window.FormData)){var o=[];for(var p in b)o.push(p+"="+b[p]);b=o.join("&")}"ontimeout"in m&&(m.timeout=g,m.ontimeout=h),"onprogress"in m&&(m.onprogress=i),m.onload=function(){d(m.responseText,m.status),e(m.responseText)},m.onerror=function(){d(m.responseText),f(m.responseText,m.status)},"GET"===k&&b&&(a+=a.indexOf("?")>=0?"&"+b:"?"+b),m.open(k,a,!l);for(var q in j)m.setRequestHeader(q,j[q]);return"undefined"!=typeof window.XDomainRequest&&m instanceof XDomainRequest?setTimeout(function(){m.send("GET"!==k?b:null)},0):m.send("GET"!==k?b:null),m}});